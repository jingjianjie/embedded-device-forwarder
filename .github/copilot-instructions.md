- # Copilot 指令文档

  本文件用于指导 GitHub Copilot 在本仓库中生成代码的方式、架构约束和术语规范。  
  请 Copilot 遵循以下规则进行代码补全和文件生成。

  ---

  # 一、业务用语约定（IMPORTANT）

  为避免讨论时出现混淆，本项目统一使用以下术语进行沟通：

  | 用语                                     | 定义                                                         |
  | ---------------------------------------- | ------------------------------------------------------------ |
  | **端侧**                                 | 在"仪器"-"转发器"-"上位机" 形成的拓扑中, 特指转发器所在嵌入式侧. |
  | **转发器/框架（Forwarder / Daemon）**    | 本项目的核心服务程序，运行在 ARM Linux 开发板上，用于多通道转发和协议封装。 |
  | 上位机                                   | 和下位机进行沟通的 PC 端软件.                                |
  | **下位机 / 设备（Device）**              | 开发板自身, 有时, 也指代开发板和其挂载的子设备所形成的整体.  |
  | **仪器/传感器/子设备/挂载设备/下属设备** | 挂载在开发板上的串口/USB 设备，例如传感器、仪器、模组、光谱仪、相机、步进电机、光闸控制器等。 |
  | **通道（Channel）/通道号/端口/挂载端口** | 一个逻辑编号（channel_id），映射到实际设备端口，如 `/dev/ttyUSB0`。有时候下属设备可能本身就具有多个通道. 这时候就要根据上下文决定语义 |
  | **驱动/仪器控制器**                      | 在没有特殊表示时, 很可能指代为了使用仪器所编写的程序, 运行在开发板上, 处于仪器的 "右侧" |
  | 左侧/右侧                                | 在"仪器"->"转发器"->"上位机" 形成的拓扑中, 互相之间会形成左右关系. 当用左右表达时, 默认是在这个拓扑上表达. 例如"驱动工作在转发器的左侧." |
  | **开发板（Board）**                      | 特指运行了转发器的 Linux ARM64 的硬件，如 Raspberry Pi、Orange Pi 等。默认情况下使用 orange pi zero3, 使用debian 系统. |
  | **左侧链路**                             | 端侧与开发板之间的通信链路.                                  |
  | 右侧链路                                 | 开发板与上位机之间的通信链路.                                |
  | **帧协议（Framing Protocol）**           | 用于在宿主链路上传递数据的固定格式二进制协议。               |
  | **选片(chip selecting)**                 | 指激活某个挂载设备的动作, 这是个借词. 实际上它是通过解析指令头的号确定指令路由的. |

  

  ---

  # 二、项目概述

  本项目为 ARM Linux 开发板构建一个 **C#/.NET 8 通用设备转发守护进程**。  
  其核心功能是：在 PC 与多个下位机设备（UART/Serial/USB）之间进行透明多通道转发，并使用自定义二进制帧协议区分不同设备的数据。也允许直接通过 USB 虚拟串口进行通信.

  愿景: 成为 "无下位机开发" 的一个工具或 standard brick

  ---

  